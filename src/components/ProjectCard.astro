---
interface Props {
  title: string;
  videoUrl?: string; // YouTube URL or local video path
}

const { title, videoUrl } = Astro.props;

// Check if it's a YouTube URL
const isYouTube = videoUrl?.includes('youtube.com') || videoUrl?.includes('youtu.be');
let embedUrl = '';

if (isYouTube && videoUrl) {
  // Convert YouTube URL to embed URL
  const videoId = videoUrl.includes('youtu.be')
    ? videoUrl.split('youtu.be/')[1]?.split('?')[0]
    : videoUrl.split('v=')[1]?.split('&')[0];
  embedUrl = `https://www.youtube.com/embed/${videoId}`;
}
---

<!-- Video only card with glass effect border -->
<div class="bg-white/5 backdrop-blur-xl rounded-2xl overflow-hidden shadow-xl shadow-black/50 hover:shadow-2xl hover:shadow-blue-500/20 transition-all duration-300 border border-white/10 hover:border-blue-500/50">
  {videoUrl ? (
    <div class="relative overflow-hidden bg-black" style="height: 500px;">
      {isYouTube ? (
        <iframe
          src={embedUrl}
          class="w-full h-full"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
          title={title}
        ></iframe>
      ) : (
        <video
          class="w-full h-full object-cover"
          autoplay
          muted
          loop
          playsinline
        >
          <source src={videoUrl} type="video/mp4" />
        </video>
      )}
    </div>
  ) : (
    <div class="h-96 bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center relative overflow-hidden">
      <div class="text-white text-7xl">ðŸ’¼</div>
    </div>
  )}
</div>
